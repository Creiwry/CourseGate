<div class="container">
  <div class="title">
    <h3><%= @course.name %></h3>
  </div>
  <% if current_instructor == @course.instructor %>
    <div>
      <%= button_to "Edit Course", edit_course_path(@course.id), method: :get %>
      <%= button_to "Delete Course", course_path(@course.id), method: :delete, data: {turbo_confirm: "Are you sure you want to delete this course?"} %>
    </div>
  <% end %>

  <div>
    <h5>Instructor: <%= @course.instructor.name %></h5>
  </div>
  <div>
    <p><%= @course.description %></p>
  </div>
  <% if current_student && current_student.enrollments.exists?(course: @course) %>
    <p>You are already enrolled in this course</p>
    <%= button_to "Unenroll", enrollment_path(@enrollment_id), method: :delete, data: {turbo_confirm: "Are you sure you want to unenroll from this course?"} %>
  <% elsif !current_student %>
  <% else %>
    <div>
      <%= link_to "Enroll", new_enrollment_path(course_id: @course.id) %>
    </div>
  <% end %>

  <div>
    <h5>
      Forum Threads
    </h5>
    <div>
      <ul>
        <% @course.forum_threads.each do |forum_thread| %>
          <li>
            <%= link_to forum_thread.title, forum_thread_path(forum_thread) %>
          </li>
        <% end %>
      </ul>
      <% if current_instructor == @course.instructor %>
        <div>
          <%= link_to "Create a Forum Thread", new_forum_thread_path(course_id: @course.id) %>
        </div>
      <% end %> 
    </div>
  </div>
</div>
